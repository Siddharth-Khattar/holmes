---
phase: 02-authentication-case-shell
plan: 04
type: execute
wave: 2
depends_on: ["02-03"]
files_modified:
  - frontend/src/app/(auth)/layout.tsx
  - frontend/src/app/(auth)/login/page.tsx
  - frontend/src/components/auth/login-form.tsx
  - frontend/src/components/auth/signup-form.tsx
  - frontend/src/components/auth/oauth-buttons.tsx
  - frontend/src/lib/validations/auth.ts
autonomous: true

must_haves:
  truths:
    - "User can sign up with email and password"
    - "User can log in with email and password"
    - "User can sign in with Google"
    - "Form shows inline validation errors"
    - "Successful auth redirects to /cases"
  artifacts:
    - path: "frontend/src/app/(auth)/login/page.tsx"
      provides: "Login/signup page with tabbed interface"
      contains: "LoginForm"
    - path: "frontend/src/components/auth/login-form.tsx"
      provides: "Email/password login form"
      contains: "signIn.email"
    - path: "frontend/src/components/auth/signup-form.tsx"
      provides: "Email/password signup form"
      contains: "signUp.email"
    - path: "frontend/src/components/auth/oauth-buttons.tsx"
      provides: "Google OAuth button"
      contains: "signIn.social"
  key_links:
    - from: "frontend/src/components/auth/login-form.tsx"
      to: "frontend/src/lib/auth-client.ts"
      via: "signIn import"
      pattern: "import.*signIn.*from"
    - from: "frontend/src/components/auth/signup-form.tsx"
      to: "frontend/src/lib/auth-client.ts"
      via: "signUp import"
      pattern: "import.*signUp.*from"
---

<objective>
Create the authentication UI with login/signup forms and Google OAuth.

Purpose: Allow users to create accounts and sign in. Clean, minimal design per CONTEXT.md.
Output: /login page with tabbed login/signup forms and Google OAuth button.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-authentication-case-shell/02-CONTEXT.md
@.planning/phases/02-authentication-case-shell/02-RESEARCH.md
@DOCS/UI/DESIGN-SYSTEM.md
@frontend/src/lib/auth-client.ts
@frontend/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create auth validation schemas</name>
  <files>
    frontend/src/lib/validations/auth.ts
  </files>
  <action>
Create `frontend/src/lib/validations/auth.ts` with Zod schemas:

```typescript
// ABOUTME: Zod validation schemas for authentication forms
// ABOUTME: Shared between login and signup forms

import { z } from "zod";

export const loginSchema = z.object({
  email: z
    .string()
    .min(1, "Email is required")
    .email("Please enter a valid email"),
  password: z
    .string()
    .min(1, "Password is required"),
});

export const signupSchema = z.object({
  name: z
    .string()
    .min(2, "Name must be at least 2 characters")
    .max(100, "Name must be less than 100 characters"),
  email: z
    .string()
    .min(1, "Email is required")
    .email("Please enter a valid email"),
  password: z
    .string()
    .min(8, "Password must be at least 8 characters")
    .regex(/[a-z]/, "Password must contain a lowercase letter")
    .regex(/[A-Z]/, "Password must contain an uppercase letter")
    .regex(/[0-9]/, "Password must contain a number"),
});

export type LoginFormData = z.infer<typeof loginSchema>;
export type SignupFormData = z.infer<typeof signupSchema>;
```
  </action>
  <verify>
    cd /Users/siddharth/Development/Hackathons/Gemini_3_2025/holmes/frontend && npx tsc --noEmit --skipLibCheck src/lib/validations/auth.ts 2>&1 || echo "Check complete"
  </verify>
  <done>Auth validation schemas created with password strength requirements</done>
</task>

<task type="auto">
  <name>Task 2: Create auth form components</name>
  <files>
    frontend/src/components/auth/login-form.tsx
    frontend/src/components/auth/signup-form.tsx
    frontend/src/components/auth/oauth-buttons.tsx
  </files>
  <action>
1. Create `frontend/src/components/auth/login-form.tsx`:
   - Use react-hook-form with zodResolver(loginSchema)
   - Call signIn.email({ email, password, callbackURL: "/cases" })
   - Show inline errors below each field
   - Show loading state on submit button
   - Handle auth errors with error message display
   - Style: dark background, smoke text, minimal aesthetic
   - Input styling: bg-jet/50, border-smoke/10, rounded-lg, px-4 py-3

2. Create `frontend/src/components/auth/signup-form.tsx`:
   - Use react-hook-form with zodResolver(signupSchema)
   - Call signUp.email({ name, email, password, callbackURL: "/cases" })
   - Show inline errors below each field
   - Show loading state on submit button
   - Handle auth errors with error message display
   - Same styling as login form

3. Create `frontend/src/components/auth/oauth-buttons.tsx`:
   - Google sign-in button using signIn.social({ provider: "google", callbackURL: "/cases" })
   - Style: liquid-glass-button or similar premium glass effect
   - Google icon from lucide-react (or inline SVG for exact Google "G" icon)
   - Text: "Continue with Google"

Form styling guidelines (per DESIGN-SYSTEM.md):
- Minimal aesthetic - clean, functional, not decorative
- Dark theme: bg-charcoal for page, bg-jet for card
- Inputs: bg-jet/50, border border-smoke/10, focus:ring-accent
- Buttons: bg-accent text-charcoal for primary, hover:bg-accent-muted
- Errors: text-destructive (red), text-sm, mt-1
- Labels: text-smoke, text-sm, font-medium
  </action>
  <verify>
    cd /Users/siddharth/Development/Hackathons/Gemini_3_2025/holmes/frontend && ls src/components/auth/*.tsx 2>/dev/null | wc -l | xargs test 3 -eq && echo "All 3 auth components created"
  </verify>
  <done>Login, signup, and OAuth button components created</done>
</task>

<task type="auto">
  <name>Task 3: Create auth page with tabbed interface</name>
  <files>
    frontend/src/app/(auth)/layout.tsx
    frontend/src/app/(auth)/login/page.tsx
  </files>
  <action>
1. Create `frontend/src/app/(auth)/layout.tsx`:
   - Simple centered layout without sidebar (different from app layout)
   - Dark background (bg-charcoal)
   - Centered content with max-width constraint
   - Include Toaster from sonner for notifications

```typescript
// ABOUTME: Layout for authentication pages (login/signup)
// ABOUTME: Centered, minimal, no sidebar - separate from app shell

import { Toaster } from "sonner";

export default function AuthLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="min-h-screen bg-charcoal flex items-center justify-center p-4">
      <Toaster
        position="top-center"
        toastOptions={{
          style: {
            background: 'var(--color-jet)',
            color: 'var(--color-smoke)',
            border: '1px solid rgba(248, 247, 244, 0.1)',
          },
        }}
      />
      {children}
    </div>
  );
}
```

2. Create `frontend/src/app/(auth)/login/page.tsx`:
   - Card container with glass styling (liquid-glass-subtle or simple bg-jet with border)
   - "Holmes" logo/text at top
   - Tab switcher: "Sign In" | "Create Account" (use state to toggle, no navigation)
   - Render LoginForm or SignupForm based on active tab
   - Divider: "Or continue with" line
   - OAuthButtons below divider
   - Link back to landing page

Tab styling:
- Inactive: text-stone
- Active: text-smoke with underline or bg indicator
- Clean transition between tabs

Page width: max-w-md for mobile-friendly centered form
  </action>
  <verify>
    cd /Users/siddharth/Development/Hackathons/Gemini_3_2025/holmes/frontend && test -f "src/app/(auth)/layout.tsx" && test -f "src/app/(auth)/login/page.tsx" && echo "Auth pages created"
  </verify>
  <done>Login page with tabbed login/signup interface created</done>
</task>

</tasks>

<verification>
1. All components created: ls src/components/auth/*.tsx
2. Auth pages created: ls src/app/(auth)/*
3. TypeScript compiles: npx tsc --noEmit --skipLibCheck
4. Start dev server and visit /login: forms render and tab switching works
</verification>

<success_criteria>
- /login page renders with tabbed interface
- Sign In tab shows email/password form
- Create Account tab shows name/email/password form
- Google OAuth button visible below divider
- Inline validation errors appear on invalid input
- Successful login redirects to /cases
- Successful signup redirects to /cases
- Page is minimal/clean (not as decorative as landing)
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentication-case-shell/02-04-SUMMARY.md`
</output>
