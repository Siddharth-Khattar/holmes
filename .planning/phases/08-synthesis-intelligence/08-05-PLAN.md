---
phase: 08-synthesis-intelligence
plan: 05
type: execute
wave: 3
depends_on: ["08-04"]
files_modified:
  - frontend/src/components/verdict/VerdictView.tsx
  - frontend/src/components/verdict/VerdictSummary.tsx
  - frontend/src/components/verdict/HypothesisCard.tsx
  - frontend/src/components/verdict/ContradictionCard.tsx
  - frontend/src/components/verdict/GapCard.tsx
  - frontend/src/components/verdict/TaskCard.tsx
  - frontend/src/components/verdict/KeyFindingCard.tsx
autonomous: true

must_haves:
  truths:
    - "Verdict view shows scrollable sections: Summary+Verdict, Key Findings, Hypotheses, Contradictions, Gaps, Tasks"
    - "Hypothesis cards show colored confidence dot + percentage"
    - "Contradiction cards show side-by-side claim comparison with severity badge"
    - "Gap cards show priority badge and actionable suggestion preview"
    - "Task cards display task type, priority, and status"
    - "Each section has a heading with count badge"
  artifacts:
    - path: "frontend/src/components/verdict/VerdictView.tsx"
      provides: "Main scrollable verdict page with all sections"
      min_lines: 80
    - path: "frontend/src/components/verdict/VerdictSummary.tsx"
      provides: "Case summary prose + verdict box with evidence strength badge"
    - path: "frontend/src/components/verdict/HypothesisCard.tsx"
      provides: "Hypothesis card with confidence dot + click handler"
    - path: "frontend/src/components/verdict/ContradictionCard.tsx"
      provides: "Side-by-side claim comparison card"
    - path: "frontend/src/components/verdict/GapCard.tsx"
      provides: "Gap card with priority + suggested actions"
    - path: "frontend/src/components/verdict/TaskCard.tsx"
      provides: "Investigation task card (read-only, no click handler for v1)"
    - path: "frontend/src/components/verdict/KeyFindingCard.tsx"
      provides: "Key finding card with rank badge"
  key_links:
    - from: "frontend/src/components/verdict/VerdictView.tsx"
      to: "frontend/src/hooks/useSynthesisData.ts"
      via: "React Query hooks for data fetching"
      pattern: "useSynthesis|useHypotheses|useContradictions|useGaps|useTasks"
    - from: "frontend/src/components/verdict/VerdictView.tsx"
      to: "frontend/src/components/verdict/HypothesisCard.tsx"
      via: "Component composition in hypotheses section"
      pattern: "HypothesisCard"

# Scope note: TaskCard is read-only for v1. No onClick handler, no TaskDetailPanel.
# Investigation tasks are displayed as informational cards showing task type, priority,
# and status. A clickable detail view (verdict-task type in DetailSidebar) is deferred
# to a later phase when task management features (status updates, assignment) are added.
---

<objective>
Build all Verdict card components and the main VerdictView layout.

Purpose: These are the visual building blocks of the Verdict tab -- the payoff users see after the pipeline runs. Each card type has distinct visualization needs (confidence dots, side-by-side claims, priority badges).

Output: 7 React components: VerdictView, VerdictSummary, HypothesisCard, ContradictionCard, GapCard, TaskCard, KeyFindingCard.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-synthesis-intelligence/08-CONTEXT.md
@.planning/phases/08-synthesis-intelligence/08-RESEARCH.md
@.planning/phases/08-synthesis-intelligence/08-04-SUMMARY.md
@frontend/src/types/synthesis.ts
@frontend/src/hooks/useSynthesisData.ts
@frontend/src/components/KnowledgeGraph/FilterPanel.tsx
@frontend/src/components/KnowledgeGraph/EntityTimeline.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verdict card components</name>
  <files>
    frontend/src/components/verdict/VerdictSummary.tsx
    frontend/src/components/verdict/KeyFindingCard.tsx
    frontend/src/components/verdict/HypothesisCard.tsx
    frontend/src/components/verdict/ContradictionCard.tsx
    frontend/src/components/verdict/GapCard.tsx
    frontend/src/components/verdict/TaskCard.tsx
  </files>
  <action>
Create all card components in `frontend/src/components/verdict/`. All components should follow the Holmes design system (dark theme, warm neutrals, Liquid Glass aesthetic). Use Tailwind classes consistent with existing components like `FilterPanel.tsx` and `EntityTimeline.tsx`.

**VerdictSummary.tsx**: Renders case_summary + verdict at top of Verdict view.
- Case summary as prose paragraphs
- Verdict box: evidence_strength badge (Conclusive=green, Substantial=amber, Inconclusive=red), verdict text, key_strengths list (green bullets), key_weaknesses list (red bullets)
- Props: `{ synthesis: SynthesisResponse | null; isLoading: boolean }`

**KeyFindingCard.tsx**: Compact card for a key finding.
- Rank number badge (1-10), title, description (truncated to 2 lines), source count
- Props: `{ finding: KeyFindingResponse; rank: number; onClick?: () => void }`

**HypothesisCard.tsx**: Card with confidence visualization.
- Colored dot: red (<40% which is <0.4), amber (0.4-0.6), green (>0.6) + percentage text (e.g. "73%")
- Claim text (2-3 lines), status badge (PENDING/SUPPORTED/REFUTED), evidence count
- Click handler: calls onClick prop (parent will open DetailSidebar)
- Props: `{ hypothesis: HypothesisResponse; onClick: () => void }`

**ContradictionCard.tsx**: Side-by-side claim comparison.
- Two columns: Claim A (left) vs Claim B (right) with VS badge in center
- Severity badge (minor=gray, significant=amber, critical=red)
- Domain tag, source excerpts preview
- Click handler: calls onClick prop
- Props: `{ contradiction: ContradictionResponse; onClick: () => void }`

**GapCard.tsx**: Gap with priority and actionable suggestion.
- Priority badge (colored: critical=red, high=orange, medium=amber, low=gray)
- Description, what_is_missing, suggested_actions preview
- Click handler: calls onClick prop
- Props: `{ gap: GapResponse; onClick: () => void }`

**TaskCard.tsx**: Investigation task card (read-only for v1).
- Task type icon/label, priority badge, status badge
- Title and description preview
- No onClick handler for v1 -- tasks are informational only. A clickable detail view is deferred to when task management features (status updates, assignment) are built.
- Props: `{ task: TaskResponse }`
  </action>
  <verify>Run `cd /Users/siddharth/Development/Hackathons/Gemini_3_2025/holmes/frontend && bun run typecheck` -- no type errors in the new files.</verify>
  <done>6 card components created with proper typing, styling consistent with Holmes design system, confidence dots color-coded, severity/priority badges color-coded</done>
</task>

<task type="auto">
  <name>Task 2: VerdictView main layout</name>
  <files>
    frontend/src/components/verdict/VerdictView.tsx
  </files>
  <action>
Create `frontend/src/components/verdict/VerdictView.tsx` with ABOUTME comment. This is the main scrollable view assembling all verdict sections.

- Uses useSynthesis, useHypotheses, useContradictions, useGaps, useTasks hooks from useSynthesisData.ts
- Parse key_findings from synthesis.key_findings_summary (JSON string -> KeyFindingResponse[]) with try/catch fallback to empty array
- Sections in order (per CONTEXT.md):
  1. VerdictSummary (summary + verdict + evidence strength)
  2. Key Findings section header + KeyFindingCard grid (2-col on lg, 1-col on mobile)
  3. Hypotheses section header + HypothesisCard list
  4. Contradictions section header + ContradictionCard list
  5. Evidence Gaps section header + GapCard list
  6. Investigation Tasks section header + TaskCard list
- Each section has a heading with count badge (e.g., "Hypotheses (4)")
- Loading state: skeleton/spinner per section
- Empty state: "Run analysis to generate intelligence" message when synthesis returns null
- Click handlers for HypothesisCard, ContradictionCard, GapCard: call an `onOpenDetail` callback prop with the item type and data. The parent component (CC page in Plan 06) will dispatch to DetailSidebar.
- Props: `{ caseId: string; onOpenDetail?: (descriptor: SidebarContentDescriptor) => void }`
  - Import SidebarContentDescriptor type from detail-sidebar types
  - Construct the descriptor objects using the "verdict-hypothesis", "verdict-contradiction", "verdict-gap" type keys
  </action>
  <verify>Run `cd /Users/siddharth/Development/Hackathons/Gemini_3_2025/holmes/frontend && bun run typecheck` -- no type errors.</verify>
  <done>VerdictView renders 6 sections with count badges, loading states, empty state, click handlers dispatch SidebarContentDescriptor for hypothesis/contradiction/gap items</done>
</task>

</tasks>

<verification>
- All 7 components compile without type errors
- VerdictView fetches from all 5 synthesis hooks
- Each card type has proper styling and props
- Click handlers produce properly typed SidebarContentDescriptor objects
- `bun run typecheck` passes
</verification>

<success_criteria>
- Hypothesis cards display colored confidence dot (red/amber/green) + percentage
- Contradiction cards show side-by-side claim comparison with severity badge
- Gap cards show priority + actionable suggestions
- VerdictView assembles all sections in correct order with count badges
- No `any` types in TypeScript code
</success_criteria>

<output>
After completion, create `.planning/phases/08-synthesis-intelligence/08-05-SUMMARY.md`
</output>
