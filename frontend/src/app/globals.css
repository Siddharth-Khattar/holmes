@import "tailwindcss";

/* ============================================================
   TAILWIND V4 DARK MODE CONFIGURATION
   ============================================================
   Configure dark mode to use class selector strategy.
   Works with next-themes which adds .dark/.light to html element.
   ============================================================ */

@custom-variant dark (&:is(.dark *));

/* ============================================================
   DESIGN TOKENS - Holmes Design System
   ============================================================
   Core color palette, typography, and glass effect tokens.
   Uses Tailwind v4's @theme directive for native utility generation.
   ============================================================ */

@theme {
  /* Core Color Palette - Dark Mode (Default) */
  --color-charcoal: #050505;
  --color-jet: #111111;
  --color-smoke: #f8f7f4;
  --color-stone: #8a8a82;

  /* Cream Accent */
  --color-accent: #f5f4ef;
  --color-accent-muted: #d4d3ce;

  /* Glass Effect Colors */
  --color-glass-light: rgba(248, 247, 244, 0.06);
  --color-glass-dark: rgba(5, 5, 5, 0.8);

  /* Shadows */
  --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.25);
  --shadow-glass-hover: 0 12px 40px rgba(0, 0, 0, 0.3);
  --shadow-glow-accent: 0 0 40px rgba(248, 247, 244, 0.08);

  /* Ethereal Shadow */
  --color-shadow: rgba(70, 68, 64, 0.85);

  /* Semantic Colors */
  --color-error: #f87171;

  /* Light Mode Palette - Warm sepia/parchment, easy on the eyes */
  --color-light-bg: #e0d6c8;
  --color-light-bg-subtle: #d6cabb;
  --color-light-text: #2a2520;
  --color-light-text-muted: #6b635a;
  --color-light-border: #c4b8a8;
  --color-light-accent: #3d3833;
  --color-light-accent-hover: #524d46;

  /* Typography - Font Families */
  --font-family-serif: var(--font-playfair);
  --font-family-sans: var(--font-dm-sans);

  /* Letter Spacing */
  --tracking-body: 0.025em;
  --tracking-tight: -0.01em;
  --tracking-wide: 0.05em;
}

/* ============================================================
   SHADCN/UI CSS VARIABLE MAPPING
   ============================================================
   Maps Holmes tokens to Shadcn/ui's expected CSS variable format.
   These are semantic aliases for component theming.
   ============================================================ */

:root,
.dark {
  /* Background */
  --background: var(--color-charcoal);
  --foreground: var(--color-smoke);

  /* Card */
  --card: var(--color-jet);
  --card-foreground: var(--color-smoke);

  /* Popover */
  --popover: var(--color-jet);
  --popover-foreground: var(--color-smoke);

  /* Primary */
  --primary: var(--color-accent);
  --primary-foreground: var(--color-charcoal);

  /* Secondary */
  --secondary: var(--color-stone);
  --secondary-foreground: var(--color-smoke);

  /* Muted */
  --muted: var(--color-jet);
  --muted-foreground: var(--color-stone);

  /* Accent */
  --accent: var(--color-accent-muted);
  --accent-foreground: var(--color-charcoal);

  /* Destructive */
  --destructive: #ef4444;
  --destructive-foreground: var(--color-smoke);

  /* Border / Input / Ring */
  --border: rgba(248, 247, 244, 0.1);
  --input: rgba(248, 247, 244, 0.1);
  --ring: var(--color-accent);

  /* Focus Ring - for accessibility */
  --ring-offset: var(--color-charcoal);

  /* Radius */
  --radius: 0.5rem;
}

/* Light mode variant for application UI */
.light {
  --background: var(--color-light-bg);
  --foreground: var(--color-light-text);

  --card: var(--color-light-bg-subtle);
  --card-foreground: var(--color-light-text);

  --popover: var(--color-light-bg);
  --popover-foreground: var(--color-light-text);

  --primary: var(--color-light-accent);
  --primary-foreground: var(--color-light-bg);

  --secondary: var(--color-light-bg-subtle);
  --secondary-foreground: var(--color-light-text);

  --muted: var(--color-light-bg-subtle);
  --muted-foreground: var(--color-light-text-muted);

  --accent: var(--color-light-bg-subtle);
  --accent-foreground: var(--color-light-text);

  --destructive: #dc2626;
  --destructive-foreground: var(--color-light-bg);

  --border: var(--color-light-border);
  --input: var(--color-light-border);
  --ring: var(--color-light-accent);

  /* Focus Ring - for accessibility */
  --ring-offset: var(--color-light-bg);
}

/* ============================================================
   TYPOGRAPHY UTILITIES
   ============================================================
   Custom letter-spacing and font size utilities.
   ============================================================ */

@layer utilities {
  /* Letter spacing presets */
  .tracking-body {
    letter-spacing: var(--tracking-body);
  }

  .tracking-wide {
    letter-spacing: var(--tracking-wide);
  }

  /* Dotted canvas background pattern */
  .bg-canvas {
    background-image: radial-gradient(
      circle,
      rgba(138, 138, 130, 0.15) 1px,
      transparent 1px
    );
    background-size: 26px 26px;
  }

  /* Light mode canvas pattern - visible warm brown dots */
  .light .bg-canvas {
    background-image: radial-gradient(
      circle,
      rgba(90, 80, 65, 0.25) 1px,
      transparent 1px
    );
  }
}

/* ============================================================
   GLASS COMPONENT UTILITIES
   ============================================================
   Reusable glass panel styles for cards and navigation.
   Subtle elegance - glass is felt more than seen.
   ============================================================ */

@layer components {
  /* Light glass for cards and content panels */
  .glass-panel {
    background: var(--color-glass-light);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: var(--shadow-glass);
    transition:
      box-shadow 0.3s ease,
      transform 0.3s ease;
  }

  .glass-panel:hover {
    box-shadow: var(--shadow-glass-hover);
  }

  /* Darker glass for navigation and overlays */
  .glass-nav {
    background: var(--color-glass-dark);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    box-shadow: var(--shadow-glass);
  }

  /* --------------------------------------------------------
     Liquid Glass Effect - Apple-inspired layered glass
     --------------------------------------------------------
     Layers: filter → overlay → specular → content
     Creates depth through layered blur, tint, and highlights.
     -------------------------------------------------------- */

  .liquid-glass {
    position: relative;
    overflow: hidden;
  }

  /* Layer 1: Backdrop blur with saturation boost */
  .liquid-glass-filter {
    position: absolute;
    inset: 0;
    z-index: 1;
    border-radius: inherit;
    backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
    -webkit-backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
  }

  /* Layer 2: Semi-transparent tinted overlay */
  .liquid-glass-overlay {
    position: absolute;
    inset: 0;
    z-index: 2;
    border-radius: inherit;
    background: linear-gradient(
      180deg,
      rgba(248, 247, 244, 0.08) 0%,
      rgba(5, 5, 5, 0.7) 100%
    );
  }

  /* Layer 3: Specular highlights (edge shine via inset shadows only) */
  .liquid-glass-specular {
    position: absolute;
    inset: 0;
    z-index: 3;
    border-radius: inherit;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.12),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    pointer-events: none;
  }

  /* Layer 4: Content sits on top */
  .liquid-glass-content {
    position: relative;
    z-index: 4;
  }

  /* --------------------------------------------------------
     Liquid Glass Variants
     --------------------------------------------------------
     Different intensities for cards, modals, and subtle UI.
     -------------------------------------------------------- */

  /* Card glass - frosted liquid glass effect for content cards */
  .liquid-glass-card {
    position: relative;
    overflow: hidden;
    border-radius: 24px;
    border: none;
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 2px 8px rgba(0, 0, 0, 0.15);
    transition:
      box-shadow 0.4s ease,
      transform 0.4s ease;
  }

  .liquid-glass-card:hover {
    box-shadow:
      0 12px 48px rgba(0, 0, 0, 0.35),
      0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .liquid-glass-card > .liquid-glass-filter {
    backdrop-filter: blur(40px) saturate(200%) brightness(1.15) contrast(1.05);
    -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.15)
      contrast(1.05);
  }

  .liquid-glass-card > .liquid-glass-overlay {
    background:
      radial-gradient(
        ellipse 80% 50% at 50% -20%,
        rgba(255, 255, 255, 0.15) 0%,
        transparent 50%
      ),
      linear-gradient(
        175deg,
        rgba(255, 255, 255, 0.12) 0%,
        rgba(180, 180, 180, 0.06) 20%,
        rgba(40, 40, 40, 0.88) 100%
      );
    filter: url(#liquid-glass-filter);
  }

  .liquid-glass-card > .liquid-glass-specular {
    background: radial-gradient(
      ellipse 100% 40% at 50% 0%,
      rgba(255, 255, 255, 0.08) 0%,
      transparent 60%
    );
    box-shadow: none;
  }

  /* Modal glass - more prominent for dialogs and overlays */
  .liquid-glass-modal {
    position: relative;
    overflow: hidden;
    border-radius: 24px;
    border: none;
    box-shadow: 0 24px 64px rgba(0, 0, 0, 0.4);
  }

  .liquid-glass-modal > .liquid-glass-filter {
    backdrop-filter: blur(32px) saturate(200%) brightness(1.15);
    -webkit-backdrop-filter: blur(32px) saturate(200%) brightness(1.15);
  }

  .liquid-glass-modal > .liquid-glass-overlay {
    background: linear-gradient(
      180deg,
      rgba(248, 247, 244, 0.06) 0%,
      rgba(5, 5, 5, 0.85) 100%
    );
  }

  .liquid-glass-modal > .liquid-glass-specular {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.15),
      inset 0 -1px 0 rgba(0, 0, 0, 0.2);
  }

  /* Nav glass - for navigation bars */
  .liquid-glass-nav {
    position: relative;
    overflow: hidden;
  }

  .liquid-glass-nav > .liquid-glass-filter {
    backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
    -webkit-backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
  }

  .liquid-glass-nav > .liquid-glass-overlay {
    background: linear-gradient(
      180deg,
      rgba(248, 247, 244, 0.08) 0%,
      rgba(5, 5, 5, 0.7) 100%
    );
  }

  /* Subtle glass - minimal, for small UI elements like tooltips/dropdowns */
  .liquid-glass-subtle {
    position: relative;
    background: rgba(248, 247, 244, 0.03);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: none;
    border-radius: 8px;
  }

  /* Animated glass panels need will-change for performance */
  .liquid-glass-animated {
    will-change: transform;
  }

  /* --------------------------------------------------------
     Light Mode Glass Variants
     --------------------------------------------------------
     Adapted glass effects for light mode with inverted
     colors and reduced intensity for better visibility.
     -------------------------------------------------------- */

  /* Light mode - glass panel */
  .light .glass-panel {
    background: rgba(214, 202, 187, 0.85);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
  }

  .light .glass-panel:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  }

  /* Light mode - glass nav */
  .light .glass-nav {
    background: rgba(214, 202, 187, 0.92);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
  }

  /* Light mode - liquid glass card */
  .light .liquid-glass-card {
    box-shadow:
      0 4px 24px rgba(0, 0, 0, 0.08),
      0 1px 4px rgba(0, 0, 0, 0.04);
  }

  .light .liquid-glass-card:hover {
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.12),
      0 2px 8px rgba(0, 0, 0, 0.06);
  }

  .light .liquid-glass-card > .liquid-glass-filter {
    backdrop-filter: blur(40px) saturate(120%) brightness(1.05);
    -webkit-backdrop-filter: blur(40px) saturate(120%) brightness(1.05);
  }

  .light .liquid-glass-card > .liquid-glass-overlay {
    background: linear-gradient(
      175deg,
      rgba(214, 202, 187, 0.94) 0%,
      rgba(224, 214, 200, 0.97) 100%
    );
  }

  .light .liquid-glass-card > .liquid-glass-specular {
    background: none;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  /* Light mode - liquid glass modal */
  .light .liquid-glass-modal {
    box-shadow: 0 24px 64px rgba(0, 0, 0, 0.15);
  }

  .light .liquid-glass-modal > .liquid-glass-filter {
    backdrop-filter: blur(32px) saturate(120%) brightness(1.02);
    -webkit-backdrop-filter: blur(32px) saturate(120%) brightness(1.02);
  }

  .light .liquid-glass-modal > .liquid-glass-overlay {
    background: linear-gradient(
      180deg,
      rgba(214, 202, 187, 0.96) 0%,
      rgba(224, 214, 200, 0.98) 100%
    );
  }

  .light .liquid-glass-modal > .liquid-glass-specular {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.6),
      inset 0 -1px 0 rgba(0, 0, 0, 0.03);
  }

  /* Light mode - liquid glass nav */
  .light .liquid-glass-nav > .liquid-glass-filter {
    backdrop-filter: blur(24px) saturate(120%) brightness(1.02);
    -webkit-backdrop-filter: blur(24px) saturate(120%) brightness(1.02);
  }

  .light .liquid-glass-nav > .liquid-glass-overlay {
    background: linear-gradient(
      180deg,
      rgba(214, 202, 187, 0.94) 0%,
      rgba(224, 214, 200, 0.97) 100%
    );
  }

  /* Light mode - subtle glass */
  .light .liquid-glass-subtle {
    background: rgba(214, 202, 187, 0.75);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

/* ============================================================
   LIQUID GLASS BUTTON
   ============================================================
   Premium glass button with layered effect and glow.
   Placed outside @layer for proper specificity.
   ============================================================ */

.liquid-glass-button {
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  background: linear-gradient(
    180deg,
    rgba(248, 247, 244, 0.12) 0%,
    rgba(248, 247, 244, 0.06) 100%
  );
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
  transition:
    box-shadow 0.3s ease,
    transform 0.2s ease,
    background 0.3s ease;
}

.liquid-glass-button:hover {
  background: linear-gradient(
    180deg,
    rgba(248, 247, 244, 0.18) 0%,
    rgba(248, 247, 244, 0.1) 100%
  );
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.25),
    0 0 32px rgba(248, 247, 244, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.2),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

.liquid-glass-button:active {
  transform: scale(0.98);
}

/* Light mode variant - uses dark accent for visibility */
.light .liquid-glass-button {
  background: var(--color-light-accent);
  color: var(--color-light-bg);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.light .liquid-glass-button:hover {
  background: var(--color-light-accent-hover);
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* ============================================================
   ACCESSIBILITY - REDUCED MOTION
   ============================================================
   Respect user preferences for reduced motion.
   ============================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================================
   BASE STYLES
   ============================================================ */

body {
  background-color: var(--background);
  color: var(--foreground);
  font-size: 18px;
  line-height: 1.6;
  letter-spacing: var(--tracking-body);
}

/* Theme-aware logo - darkens cream/white logo in light mode */
.light .logo-themed {
  filter: brightness(0);
}
